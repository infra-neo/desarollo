# MCP Server 2 - KasmWeb Architecture
# Environment Configuration

# ====================
# General Configuration
# ====================
DOMAIN=example.com
TIMEZONE=America/Mexico_City

# ====================
# PostgreSQL Configuration
# ====================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=mcpserver
POSTGRES_PASSWORD=changeme_strong_password

# Database names
POSTGRES_DB_AUTHENTIK=authentik
POSTGRES_DB_KASM=kasm
POSTGRES_DB_INFISICAL=infisical
POSTGRES_DB_1PANEL=onepanel
POSTGRES_DB_WEBASSET=webasset

# ====================
# Authentik Configuration
# ====================
AUTHENTIK_SECRET_KEY=changeme_authentik_secret_key_min_50_chars_random
AUTHENTIK_ERROR_REPORTING_ENABLED=false
AUTHENTIK_PORT_HTTP=9000
AUTHENTIK_PORT_HTTPS=9443

# Authentik PostgreSQL
AUTHENTIK_POSTGRESQL__HOST=${POSTGRES_HOST}
AUTHENTIK_POSTGRESQL__NAME=${POSTGRES_DB_AUTHENTIK}
AUTHENTIK_POSTGRESQL__USER=${POSTGRES_USER}
AUTHENTIK_POSTGRESQL__PASSWORD=${POSTGRES_PASSWORD}

# Authentik Redis
AUTHENTIK_REDIS__HOST=redis
AUTHENTIK_REDIS__PORT=6379

# ====================
# KasmWeb Configuration
# ====================
KASM_PORT=443
KASM_ADMIN_USER=admin@${DOMAIN}
KASM_ADMIN_PASSWORD=changeme_kasm_admin_password
KASM_DATABASE_HOSTNAME=${POSTGRES_HOST}
KASM_DATABASE_PORT=${POSTGRES_PORT}
KASM_DATABASE_NAME=${POSTGRES_DB_KASM}
KASM_DATABASE_USER=${POSTGRES_USER}
KASM_DATABASE_PASSWORD=${POSTGRES_PASSWORD}
KASM_REDIS_HOST=redis
KASM_REDIS_PORT=6379
KASM_DEFAULT_RECORDING_PATH=/opt/kasm/current/recordings
KASM_SESSION_RECORDING_ENABLED=true

# ====================
# Infisical Configuration
# ====================
INFISICAL_PORT=8080
INFISICAL_ENCRYPTION_KEY=changeme_infisical_encryption_key_32_chars
INFISICAL_JWT_SECRET=changeme_infisical_jwt_secret_key
INFISICAL_DB_HOST=${POSTGRES_HOST}
INFISICAL_DB_PORT=${POSTGRES_PORT}
INFISICAL_DB_NAME=${POSTGRES_DB_INFISICAL}
INFISICAL_DB_USER=${POSTGRES_USER}
INFISICAL_DB_PASSWORD=${POSTGRES_PASSWORD}

# ====================
# 1Panel Configuration
# ====================
ONEPANEL_PORT=10000
ONEPANEL_DB_HOST=${POSTGRES_HOST}
ONEPANEL_DB_PORT=${POSTGRES_PORT}
ONEPANEL_DB_NAME=${POSTGRES_DB_1PANEL}
ONEPANEL_DB_USER=${POSTGRES_USER}
ONEPANEL_DB_PASSWORD=${POSTGRES_PASSWORD}

# ====================
# WebAsset Controller Configuration
# ====================
WEBASSET_PORT=5000
WEBASSET_SECRET_KEY=changeme_webasset_secret_key
WEBASSET_DB_HOST=${POSTGRES_HOST}
WEBASSET_DB_PORT=${POSTGRES_PORT}
WEBASSET_DB_NAME=${POSTGRES_DB_WEBASSET}
WEBASSET_DB_USER=${POSTGRES_USER}
WEBASSET_DB_PASSWORD=${POSTGRES_PASSWORD}

# WebAsset - Authentik Integration
WEBASSET_AUTHENTIK_URL=https://auth.${DOMAIN}
WEBASSET_AUTHENTIK_CLIENT_ID=webasset-controller
WEBASSET_AUTHENTIK_CLIENT_SECRET=changeme_webasset_client_secret

# WebAsset - Infisical Integration
WEBASSET_INFISICAL_URL=http://infisical:${INFISICAL_PORT}
WEBASSET_INFISICAL_TOKEN=changeme_infisical_token

# WebAsset - KasmWeb Integration
WEBASSET_KASM_URL=https://kasm.${DOMAIN}
WEBASSET_KASM_API_KEY=changeme_kasm_api_key
WEBASSET_KASM_API_SECRET=changeme_kasm_api_secret

# ====================
# Traefik Configuration
# ====================
TRAEFIK_DASHBOARD_PORT=8080
TRAEFIK_LOG_LEVEL=INFO
ACME_EMAIL=admin@${DOMAIN}

# ====================
# Tailscale Configuration
# ====================
TAILSCALE_AUTHKEY=tskey-auth-changeme
TAILSCALE_HOSTNAME=mcp-server-2

# ====================
# Security Configuration
# ====================
# Maximum concurrent sessions per user
MAX_SESSIONS_PER_USER=5

# Session timeout (minutes)
SESSION_TIMEOUT=30

# MFA requirement
REQUIRE_MFA=true

# Audit log retention (days)
AUDIT_LOG_RETENTION_DAYS=90
